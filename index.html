<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Planificador de Estudios - UTN FRC</title>
    <style>
        /* Estilos Generales y Layout */
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 30px;
            background-color: #eef2f7;
            color: #333;
        }
        h1 {
            color: #004d99;
            text-align: center;
            margin-bottom: 30px;
            font-size: 2.5em;
            border-bottom: 3px solid #004d99;
            padding-bottom: 10px;
            grid-column: 1 / -1;
        }
        
        /* Contenedor principal con Flexbox */
        .main-container {
            display: flex;
            gap: 40px;
            flex-wrap: wrap;
            justify-content: center;
        }
        
        .column {
            flex: 1 1 300px;
            min-width: 300px;
        }

        /* Contenedor de materia (Card) */
        .materia-card {
            background-color: #ffffff;
            border-radius: 12px;
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
            margin-bottom: 25px;
            padding: 25px;
            transition: transform 0.3s ease;
        }
        .materia-card:hover {
            transform: translateY(-3px);
        }
        .materia-card h2 {
            color: #007bff;
            font-size: 1.6em;
            border-bottom: 2px solid #e0e0e0;
            padding-bottom: 10px;
            margin-top: 0;
            /* Importante para la edici√≥n del t√≠tulo */
            outline: none; 
            cursor: text; /* Mantiene cursor de texto para los editables */
        }
        
        /* Lista de unidades */
        .unidad-list {
            list-style: none;
            padding: 0;
            margin-top: 15px;
        }
        .unidad-item {
            padding: 12px 15px;
            margin-bottom: 8px;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            border: 1px solid #f0f0f0;
            background-color: #f9f9f9;
            box-sizing: border-box;
        }
        .unidad-item:hover {
            background-color: #e9f2ff;
            border-color: #b3d4ff;
        }
        
        /* Icono de estado */
        .status-icon {
            margin-right: 15px;
            font-size: 1.2em;
            font-weight: bold;
            color: #dc3545;
            min-width: 20px;
            text-align: center;
        }
        /* Permite la edici√≥n en el navegador */
        .item-text {
            flex-grow: 1;
            min-height: 1.2em; 
            outline: none;
        }
        
        /* Estilos para unidad marcada como hecha (Completed) */
        .completed {
            background-color: #d4edda;
            color: #155724;
            border-color: #c3e6cb;
            box-shadow: 0 2px 4px rgba(40, 167, 69, 0.2);
        }
        .completed .item-text {
            text-decoration: line-through;
            opacity: 0.8;
            font-style: italic;
        }
        .completed .status-icon {
            color: #28a745;
        }

        /* Estilos para Analisis Matematico */
        .analisis-matematico h2 {
            color: #cc5200;
        }
        .analisis-matematico .materia-card {
            border-left: 5px solid #cc5200;
        }

        /* ESTILOS para Algebra y Geometr√≠a Anal√≠tica */
        .algebra-geometrica h2 {
            color: #8b0000;
        }
        .algebra-geometrica .materia-card {
            border-left: 5px solid #8b0000;
        }
    </style>
</head>
<body>

    <h1>üìù Planificador de Cursada - Ingenier√≠a UTN FRC</h1>

    <div class="main-container">
        <div class="column fisica">
            <div class="materia-card">
                <h2>F√çSICA I - 15 Unidades</h2>
                <div id="fisica-list">
                    <script>
                        const UNIDADES_FISICA = [
                            "U1: Mediciones y Errores",
                            "U2: √ìptica Geom√©trica - Parte 1 (Luz, Reflexi√≥n, Refracci√≥n)",
                            "U3: √ìptica Geom√©trica - Parte 2 (Espejos y Lentes)",
                            "U4: Cinem√°tica del Punto - Parte 1 (MRU, MRUV)",
                            "U5: Cinem√°tica del Punto - Parte 2 (Tiro Oblicuo, MC)",
                            "U6: Fundamentos de la Din√°mica (Leyes de Newton, Rozamiento)",
                            "U7: Din√°mica de la Part√≠cula (Trabajo y Energ√≠a)",
                            "U8: Din√°mica de la Part√≠cula (Conservaci√≥n de Energ√≠a)",
                            "U9: Din√°mica de los Sistemas (Impulso y Cantidad de Movimiento)",
                            "U10: Din√°mica de los Sistemas (Centro de Masa, Choques)",
                            "U11: Est√°tica (Equilibrio de la Part√≠cula y Cuerpo R√≠gido)",
                            "U12: Cinem√°tica del S√≥lido (Momento de Inercia, Rotaci√≥n)",
                            "U13: Din√°mica del S√≥lido (Torque y L)",
                            "U14: Movimiento Oscilatorio (MAS)",
                            "U15: Ondas El√°sticas y Fluidos (Conceptos Fundamentales)"
                        ];
                        
                        const containerFisica = document.getElementById('fisica-list');

                        UNIDADES_FISICA.forEach((nombre, index) => {
                            const cardHtml = `
                                <div class="materia-card" data-unidad-card-id="FIS-${index + 1}">
                                    <h2>${nombre}</h2> 
                                    <ul class="unidad-list">
                                        <li class="unidad-item" onclick="toggleComplete(this, 'Fisica')" data-unidad-id="FIS-${index + 1}-T">
                                            <span class="status-icon">‚ùå</span>
                                            <span class="item-text" contenteditable="true">Teor√≠a</span>
                                        </li>
                                        <li class="unidad-item" onclick="toggleComplete(this, 'Fisica')" data-unidad-id="FIS-${index + 1}-P">
                                            <span class="status-icon">‚ùå</span>
                                            <span class="item-text" contenteditable="true">Pr√°ctica/Problemas</span>
                                        </li>
                                    </ul>
                                </div>
                            `;
                            containerFisica.innerHTML += cardHtml;
                        });
                    </script>
                </div>
            </div>
        </div>

        <div class="column analisis-matematico">
            <div class="materia-card">
                <h2>AN√ÅLISIS MATEM√ÅTICO I - 15 Unidades</h2>
                <div id="analisis-list">
                    <script>
                        const NUM_UNIDADES_ANALISIS = 15;
                        const containerAnalisis = document.getElementById('analisis-list');

                        for (let i = 1; i <= NUM_UNIDADES_ANALISIS; i++) {
                            const cardHtml = `
                                <div class="materia-card" data-unidad-card-id="ANA-${i}">
                                    <h2 contenteditable="true" data-title-id="ANA-H2-${i}">Unidad ${i}</h2>
                                    <ul class="unidad-list">
                                        <li class="unidad-item" onclick="toggleComplete(this, 'Analisis')" data-unidad-id="ANA-${i}-T">
                                            <span class="status-icon">‚ùå</span>
                                            <span class="item-text" contenteditable="true"></span> </li>
                                        <li class="unidad-item" onclick="toggleComplete(this, 'Analisis')" data-unidad-id="ANA-${i}-P">
                                            <span class="status-icon">‚ùå</span>
                                            <span class="item-text" contenteditable="true"></span> </li>
                                    </ul>
                                </div>
                            `;
                            containerAnalisis.innerHTML += cardHtml;
                        }
                    </script>
                </div>
            </div>
        </div>

        <div class="column algebra-geometrica">
            <div class="materia-card">
                <h2>√ÅLGEBRA Y GEOMETR√çA ANAL√çTICA - 15 Unidades</h2>
                <div id="algebra-list">
                    <script>
                        const NUM_UNIDADES_ALGEBRA = 15;
                        const containerAlgebra = document.getElementById('algebra-list');

                        for (let i = 1; i <= NUM_UNIDADES_ALGEBRA; i++) {
                            const cardHtml = `
                                <div class="materia-card" data-unidad-card-id="ALG-${i}">
                                    <h2 contenteditable="true" data-title-id="ALG-H2-${i}">Unidad ${i}</h2>
                                    <ul class="unidad-list">
                                        <li class="unidad-item" onclick="toggleComplete(this, 'Algebra')" data-unidad-id="ALG-${i}-T">
                                            <span class="status-icon">‚ùå</span>
                                            <span class="item-text" contenteditable="true"></span> </li>
                                        <li class="unidad-item" onclick="toggleComplete(this, 'Algebra')" data-unidad-id="ALG-${i}-P">
                                            <span class="status-icon">‚ùå</span>
                                            <span class="item-text" contenteditable="true"></span> </li>
                                    </ul>
                                </div>
                            `;
                            containerAlgebra.innerHTML += cardHtml;
                        }
                    </script>
                </div>
            </div>
        </div>
    </div>

    <script>
        /**
         * Funciones para manejar la persistencia del estado (Completado y Texto Personalizado)
         */

        // Claves de estado de progreso
        const STORAGE_KEY_FISICA = 'unidadesFisicaICompletadas';
        const STORAGE_KEY_ANALISIS = 'unidadesAnalisisICompletadas';
        const STORAGE_KEY_ALGEBRA = 'unidadesAlgebraICompletadas';
        // Claves de nombres personalizados (para los items de lista)
        const CUSTOM_NAMES_KEY_FISICA = 'fisicaCustomNames';
        const CUSTOM_NAMES_KEY_ANALISIS = 'analisisCustomNames';
        const CUSTOM_NAMES_KEY_ALGEBRA = 'algebraCustomNames';
        // Claves de t√≠tulos de unidad (para los <h2>)
        const TITLE_NAMES_KEY_ANALISIS = 'analisisTitleNames';
        const TITLE_NAMES_KEY_ALGEBRA = 'algebraTitleNames';


        function getStorageKey(materia) {
            if (materia === 'Fisica') return STORAGE_KEY_FISICA;
            if (materia === 'Analisis') return STORAGE_KEY_ANALISIS;
            if (materia === 'Algebra') return STORAGE_KEY_ALGEBRA;
            return null;
        }

        function getContainerId(materia) {
            if (materia === 'Fisica') return 'fisica-list';
            if (materia === 'Analisis') return 'analisis-list';
            if (materia === 'Algebra') return 'algebra-list';
            return null;
        }
        
        function getCustomNamesStorageKey(materia) {
            if (materia === 'Fisica') return CUSTOM_NAMES_KEY_FISICA;
            if (materia === 'Analisis') return CUSTOM_NAMES_KEY_ANALISIS;
            if (materia === 'Algebra') return CUSTOM_NAMES_KEY_ALGEBRA;
            return null;
        }
        
        function getTitleNamesStorageKey(materia) {
            if (materia === 'Analisis') return TITLE_NAMES_KEY_ANALISIS;
            if (materia === 'Algebra') return TITLE_NAMES_KEY_ALGEBRA;
            return null;
        }

        function loadCompletedState() {
            // Cargar estado de progreso
            applyState(document.getElementById(getContainerId('Fisica')), JSON.parse(localStorage.getItem(STORAGE_KEY_FISICA) || '[]'));
            applyState(document.getElementById(getContainerId('Analisis')), JSON.parse(localStorage.getItem(STORAGE_KEY_ANALISIS) || '[]'));
            applyState(document.getElementById(getContainerId('Algebra')), JSON.parse(localStorage.getItem(STORAGE_KEY_ALGEBRA) || '[]'));
            
            // Cargar nombres personalizados (items de lista)
            loadCustomNames('Fisica'); 
            loadCustomNames('Analisis');
            loadCustomNames('Algebra');

            // Cargar t√≠tulos de unidad (h2)
            loadTitles('Analisis');
            loadTitles('Algebra');
        }
        
        function applyState(container, completedIds) {
             if (!container) return; 

             container.querySelectorAll('.unidad-item').forEach(item => {
                const id = item.getAttribute('data-unidad-id');
                const statusIcon = item.querySelector('.status-icon');

                if (completedIds.includes(id)) {
                    item.classList.add('completed');
                    statusIcon.textContent = '‚úîÔ∏è';
                } else {
                    item.classList.remove('completed');
                    statusIcon.textContent = '‚ùå';
                }
            });
        }

        function saveCompletedState(materia) {
            const key = getStorageKey(materia);
            const container = document.getElementById(getContainerId(materia));

            const completedItems = container.querySelectorAll('.unidad-item.completed');
            const completedIds = Array.from(completedItems).map(item => item.getAttribute('data-unidad-id'));

            localStorage.setItem(key, JSON.stringify(completedIds));
        }

        function toggleComplete(item, materia) {
            item.classList.toggle('completed');

            const statusIcon = item.querySelector('.status-icon');
            if (item.classList.contains('completed')) {
                statusIcon.textContent = '‚úîÔ∏è';
            } else {
                statusIcon.textContent = '‚ùå';
            }

            saveCompletedState(materia);
        }

        // --- Funciones para guardar nombres editados (√≠tems de lista) ---

        function saveCustomNames(materia) {
            const key = getCustomNamesStorageKey(materia);
            if (!key) return;
            
            const containerId = getContainerId(materia);
            const customNames = {};
            document.getElementById(containerId).querySelectorAll('.item-text').forEach(itemText => {
                const parentLi = itemText.closest('.unidad-item');
                const id = parentLi.getAttribute('data-unidad-id');
                customNames[id] = itemText.textContent;
            });
            
            localStorage.setItem(key, JSON.stringify(customNames));
        }

        function loadCustomNames(materia) {
            const key = getCustomNamesStorageKey(materia);
            if (!key) return;
            
            const customNames = JSON.parse(localStorage.getItem(key) || '{}');
            const containerId = getContainerId(materia);
            const container = document.getElementById(containerId);

            if (!container) return;

            container.querySelectorAll('.item-text').forEach(itemText => {
                const parentLi = itemText.closest('.unidad-item');
                const id = parentLi.getAttribute('data-unidad-id');
                
                // 1. Cargar nombre personalizado si existe
                if (customNames[id] || (materia === 'Fisica' && customNames[id] === "")) { 
                    itemText.textContent = customNames[id];
                }
                
                // 2. A√±adir eventos para guardar al editar
                itemText.addEventListener('blur', () => saveCustomNames(materia));
                
                itemText.addEventListener('keydown', (event) => {
                    if (event.key === 'Enter') {
                        event.preventDefault(); 
                        saveCustomNames(materia);
                        itemText.blur(); 
                    }
                });
            });
        }

        // --- Funciones para guardar T√çTULOS DE UNIDAD (h2) ---

        function saveTitles(materia) {
            const key = getTitleNamesStorageKey(materia);
            const containerId = getContainerId(materia);

            if (!key || !containerId) return;
            
            const customTitles = {};
            // Selecciona todos los <h2> con el atributo de ID de t√≠tulo
            document.getElementById(containerId).querySelectorAll('h2[data-title-id]').forEach(titleH2 => {
                const id = titleH2.getAttribute('data-title-id');
                customTitles[id] = titleH2.textContent;
            });
            
            localStorage.setItem(key, JSON.stringify(customTitles));
        }

        function loadTitles(materia) {
            const key = getTitleNamesStorageKey(materia);
            const containerId = getContainerId(materia);

            if (!key || !containerId) return;

            const customTitles = JSON.parse(localStorage.getItem(key) || '{}');
            const container = document.getElementById(containerId);

            if (!container) return;

            container.querySelectorAll('h2[data-title-id]').forEach(titleH2 => {
                const id = titleH2.getAttribute('data-title-id');
                
                // 1. Cargar t√≠tulo personalizado
                if (customTitles[id]) { 
                    titleH2.textContent = customTitles[id];
                }
                
                // 2. A√±adir eventos para guardar al editar
                titleH2.addEventListener('blur', () => saveTitles(materia));
                
                titleH2.addEventListener('keydown', (event) => {
                    if (event.key === 'Enter') {
                        event.preventDefault(); 
                        saveTitles(materia);
                        titleH2.blur(); 
                    }
                });
            });
        }
        
        // Cargar todo al iniciar
        document.addEventListener('DOMContentLoaded', loadCompletedState);
    </script>

</body>
</html>
