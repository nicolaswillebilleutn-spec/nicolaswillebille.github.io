<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Planificador de Estudios - UTN FRC</title>
    <style>
        /* Estilos Generales y Layout */
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 30px;
            background-color: #eef2f7;
            color: #333;
        }
        h1 {
            color: #004d99;
            text-align: center;
            margin-bottom: 30px;
            font-size: 2.5em;
            border-bottom: 3px solid #004d99;
            padding-bottom: 10px;
            grid-column: 1 / -1;
        }
        
        /* Contenedor principal con Flexbox (se ajustar√° a 3 columnas si hay espacio) */
        .main-container {
            display: flex;
            gap: 40px;
            flex-wrap: wrap; /* Permite que se apilen en pantallas peque√±as */
            justify-content: center; /* Centra las columnas si hay menos de 3 */
        }
        
        .column {
            flex: 1 1 300px; /* Base flexible: crecer, no encoger, ancho base 300px */
            min-width: 300px;
        }

        /* Contenedor de materia (Card) */
        .materia-card {
            background-color: #ffffff;
            border-radius: 12px;
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
            margin-bottom: 25px;
            padding: 25px;
            transition: transform 0.3s ease;
        }
        .materia-card:hover {
            transform: translateY(-3px);
        }
        .materia-card h2 {
            color: #007bff;
            font-size: 1.6em;
            border-bottom: 2px solid #e0e0e0;
            padding-bottom: 10px;
            margin-top: 0;
        }
        
        /* Lista de unidades */
        .unidad-list {
            list-style: none;
            padding: 0;
            margin-top: 15px;
        }
        .unidad-item {
            padding: 12px 15px;
            margin-bottom: 8px;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            border: 1px solid #f0f0f0;
            background-color: #f9f9f9;
            box-sizing: border-box;
        }
        .unidad-item:hover {
            background-color: #e9f2ff;
            border-color: #b3d4ff;
        }
        
        /* Icono de estado */
        .status-icon {
            margin-right: 15px;
            font-size: 1.2em;
            font-weight: bold;
            color: #dc3545;
            min-width: 20px;
            text-align: center;
        }
        .item-text {
            flex-grow: 1;
            min-height: 1.2em; 
            outline: none;
        }
        
        /* Estilos para unidad marcada como hecha (Completed) */
        .completed {
            background-color: #d4edda;
            color: #155724;
            border-color: #c3e6cb;
            box-shadow: 0 2px 4px rgba(40, 167, 69, 0.2);
        }
        .completed .item-text {
            text-decoration: line-through;
            opacity: 0.8;
            font-style: italic;
        }
        .completed .status-icon {
            color: #28a745;
        }

        /* Estilos para Analisis Matematico - Diferente color */
        .analisis-matematico h2 {
            color: #cc5200; /* Naranja/Tostado */
        }
        .analisis-matematico .materia-card {
            border-left: 5px solid #cc5200;
        }

        /* ESTILOS NUEVOS: Algebra y Geometr√≠a Anal√≠tica */
        .algebra-geometrica h2 {
            color: #8b0000; /* Borgo√±a/Rojo Oscuro */
        }
        .algebra-geometrica .materia-card {
            border-left: 5px solid #8b0000;
        }
    </style>
</head>
<body>

    <h1>üìù Planificador de Cursada - Ingenier√≠a UTN FRC</h1>

    <div class="main-container">
        <div class="column">
            <div class="materia-card">
                <h2>F√çSICA I - 15 Unidades</h2>
                <div id="fisica-list">
                    <script>
                        const UNIDADES_FISICA = [
                            "U1: Mediciones y Errores",
                            "U2: √ìptica Geom√©trica - Parte 1 (Luz, Reflexi√≥n, Refracci√≥n)",
                            "U3: √ìptica Geom√©trica - Parte 2 (Espejos y Lentes)",
                            "U4: Cinem√°tica del Punto - Parte 1 (MRU, MRUV)",
                            "U5: Cinem√°tica del Punto - Parte 2 (Tiro Oblicuo, MC)",
                            "U6: Fundamentos de la Din√°mica (Leyes de Newton, Rozamiento)",
                            "U7: Din√°mica de la Part√≠cula (Trabajo y Energ√≠a)",
                            "U8: Din√°mica de la Part√≠cula (Conservaci√≥n de Energ√≠a)",
                            "U9: Din√°mica de los Sistemas (Impulso y Cantidad de Movimiento)",
                            "U10: Din√°mica de los Sistemas (Centro de Masa, Choques)",
                            "U11: Est√°tica (Equilibrio de la Part√≠cula y Cuerpo R√≠gido)",
                            "U12: Cinem√°tica del S√≥lido (Momento de Inercia, Rotaci√≥n)",
                            "U13: Din√°mica del S√≥lido (Torque y L)",
                            "U14: Movimiento Oscilatorio (MAS)",
                            "U15: Ondas El√°sticas y Fluidos (Conceptos Fundamentales)"
                        ];
                        
                        const containerFisica = document.getElementById('fisica-list');

                        UNIDADES_FISICA.forEach((nombre, index) => {
                            const cardHtml = `
                                <div class="materia-card">
                                    <h2>${nombre}</h2>
                                    <ul class="unidad-list">
                                        <li class="unidad-item" onclick="toggleComplete(this, 'Fisica')" data-unidad-id="FIS-${index + 1}-T">
                                            <span class="status-icon">‚ùå</span>
                                            <span class="item-text" contenteditable="true">Teor√≠a/Conceptos</span>
                                        </li>
                                        <li class="unidad-item" onclick="toggleComplete(this, 'Fisica')" data-unidad-id="FIS-${index + 1}-P">
                                            <span class="status-icon">‚ùå</span>
                                            <span class="item-text" contenteditable="true">Pr√°ctica/Problemas</span>
                                        </li>
                                    </ul>
                                </div>
                            `;
                            containerFisica.innerHTML += cardHtml;
                        });
                    </script>
                </div>
            </div>
        </div>

        <div class="column analisis-matematico">
            <div class="materia-card">
                <h2>AN√ÅLISIS MATEM√ÅTICO I - 15 Unidades</h2>
                <div id="analisis-list">
                    <script>
                        const NUM_UNIDADES_ANALISIS = 15;
                        const containerAnalisis = document.getElementById('analisis-list');

                        for (let i = 1; i <= NUM_UNIDADES_ANALISIS; i++) {
                            const cardHtml = `
                                <div class="materia-card">
                                    <h2>Unidad ${i}</h2>
                                    <ul class="unidad-list">
                                        <li class="unidad-item" onclick="toggleComplete(this, 'Analisis')" data-unidad-id="ANA-${i}-T">
                                            <span class="status-icon">‚ùå</span>
                                            <span class="item-text" contenteditable="true">Tema ${i}.1 (Escribir aqu√≠ el tema)</span>
                                        </li>
                                        <li class="unidad-item" onclick="toggleComplete(this, 'Analisis')" data-unidad-id="ANA-${i}-P">
                                            <span class="status-icon">‚ùå</span>
                                            <span class="item-text" contenteditable="true">Tema ${i}.2 (Escribir aqu√≠ el tema)</span>
                                        </li>
                                    </ul>
                                </div>
                            `;
                            containerAnalisis.innerHTML += cardHtml;
                        }
                    </script>
                </div>
            </div>
        </div>

        <div class="column algebra-geometrica">
            <div class="materia-card">
                <h2>√ÅLGEBRA Y GEOMETR√çA ANAL√çTICA - 15 Unidades</h2>
                <div id="algebra-list">
                    <script>
                        const NUM_UNIDADES_ALGEBRA = 15;
                        const containerAlgebra = document.getElementById('algebra-list');

                        for (let i = 1; i <= NUM_UNIDADES_ALGEBRA; i++) {
                            const cardHtml = `
                                <div class="materia-card">
                                    <h2>Unidad ${i}</h2>
                                    <ul class="unidad-list">
                                        <li class="unidad-item" onclick="toggleComplete(this, 'Algebra')" data-unidad-id="ALG-${i}-T">
                                            <span class="status-icon">‚ùå</span>
                                            <span class="item-text" contenteditable="true">Tema ${i}.1 (Escribir aqu√≠ el tema)</span>
                                        </li>
                                        <li class="unidad-item" onclick="toggleComplete(this, 'Algebra')" data-unidad-id="ALG-${i}-P">
                                            <span class="status-icon">‚ùå</span>
                                            <span class="item-text" contenteditable="true">Tema ${i}.2 (Escribir aqu√≠ el tema)</span>
                                        </li>
                                    </ul>
                                </div>
                            `;
                            containerAlgebra.innerHTML += cardHtml;
                        }
                    </script>
                </div>
            </div>
        </div>
    </div>

    <script>
        /**
         * Funciones para manejar la persistencia del estado (Completado)
         * Se han actualizado para incluir "Algebra".
         */

        const STORAGE_KEY_FISICA = 'unidadesFisicaICompletadas';
        const STORAGE_KEY_ANALISIS = 'unidadesAnalisisICompletadas';
        const STORAGE_KEY_ALGEBRA = 'unidadesAlgebraICompletadas'; // NUEVA CLAVE

        function getStorageKey(materia) {
            if (materia === 'Fisica') return STORAGE_KEY_FISICA;
            if (materia === 'Analisis') return STORAGE_KEY_ANALISIS;
            if (materia === 'Algebra') return STORAGE_KEY_ALGEBRA; // NUEVO
            return null;
        }

        function getContainerId(materia) {
            if (materia === 'Fisica') return 'fisica-list';
            if (materia === 'Analisis') return 'analisis-list';
            if (materia === 'Algebra') return 'algebra-list'; // NUEVO
            return null;
        }

        function loadCompletedState() {
            // Cargar F√≠sica I
            const completedFisica = JSON.parse(localStorage.getItem(STORAGE_KEY_FISICA) || '[]');
            applyState(document.getElementById(getContainerId('Fisica')), completedFisica);

            // Cargar An√°lisis Matem√°tico I
            const completedAnalisis = JSON.parse(localStorage.getItem(STORAGE_KEY_ANALISIS) || '[]');
            applyState(document.getElementById(getContainerId('Analisis')), completedAnalisis);
            loadCustomNames('Analisis'); // Cargar nombres personalizados

            // Cargar √Ålgebra y Geometr√≠a Anal√≠tica I (NUEVO)
            const completedAlgebra = JSON.parse(localStorage.getItem(STORAGE_KEY_ALGEBRA) || '[]');
            applyState(document.getElementById(getContainerId('Algebra')), completedAlgebra);
            loadCustomNames('Algebra'); // Cargar nombres personalizados
        }
        
        function applyState(container, completedIds) {
             // El c√≥digo para F√≠sica I no est√° en un solo div, por lo que este bucle debe ser m√°s robusto.
             // Para simplificar, asumiremos que los selectores .unidad-item son suficientes si se llama al contenedor correcto.
             if (!container) return; // Protecci√≥n

             container.querySelectorAll('.unidad-item').forEach(item => {
                const id = item.getAttribute('data-unidad-id');
                const statusIcon = item.querySelector('.status-icon');

                if (completedIds.includes(id)) {
                    item.classList.add('completed');
                    statusIcon.textContent = '‚úîÔ∏è';
                } else {
                    item.classList.remove('completed');
                    statusIcon.textContent = '‚ùå';
                }
            });
        }

        function saveCompletedState(materia) {
            const key = getStorageKey(materia);
            const container = document.getElementById(getContainerId(materia));

            const completedItems = container.querySelectorAll('.unidad-item.completed');
            const completedIds = Array.from(completedItems).map(item => item.getAttribute('data-unidad-id'));

            localStorage.setItem(key, JSON.stringify(completedIds));
        }

        function toggleComplete(item, materia) {
            item.classList.toggle('completed');

            const statusIcon = item.querySelector('.status-icon');
            if (item.classList.contains('completed')) {
                statusIcon.textContent = '‚úîÔ∏è';
            } else {
                statusIcon.textContent = '‚ùå';
            }

            saveCompletedState(materia);
        }

        // --- Funciones para carga manual de nombres (Analisis y Algebra) ---

        function getCustomNamesStorageKey(materia) {
            // Solo para materias con unidades gen√©ricas (Analisis y Algebra)
            if (materia === 'Analisis') return 'analisisCustomNames';
            if (materia === 'Algebra') return 'algebraCustomNames'; // NUEVA CLAVE
            return null;
        }

        function saveCustomNames(materia) {
            const key = getCustomNamesStorageKey(materia);
            if (!key) return;
            
            const containerId = getContainerId(materia);
            const customNames = {};
            document.getElementById(containerId).querySelectorAll('.item-text').forEach(itemText => {
                const parentLi = itemText.closest('.unidad-item');
                const id = parentLi.getAttribute('data-unidad-id');
                customNames[id] = itemText.textContent;
            });
            
            localStorage.setItem(key, JSON.stringify(customNames));
        }

        function loadCustomNames(materia) {
            const key = getCustomNamesStorageKey(materia);
            if (!key) return;
            
            const customNames = JSON.parse(localStorage.getItem(key) || '{}');
            const containerId = getContainerId(materia);

            document.getElementById(containerId).querySelectorAll('.item-text').forEach(itemText => {
                const parentLi = itemText.closest('.unidad-item');
                const id = parentLi.getAttribute('data-unidad-id');
                
                if (customNames[id]) {
                    itemText.textContent = customNames[id];
                }
                
                // Asegurar que al escribir, se guarde el cambio
                itemText.addEventListener('blur', () => saveCustomNames(materia));
                itemText.addEventListener('keydown', (event) => {
                    if (event.key === 'Enter') {
                        event.preventDefault(); // Evita salto de l√≠nea
                        saveCustomNames(materia);
                        itemText.blur(); // Sale del modo edici√≥n
                    }
                });
            });
        }
        
        // Cargar todo al iniciar
        document.addEventListener('DOMContentLoaded', loadCompletedState);
    </script>

</body>
</html>
